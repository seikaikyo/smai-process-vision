# 製程視覺分析系統整合提案

**文件編號**: SMAI-PV-2024-001
**版本**: 1.0
**日期**: 2024-01-15
**撰寫人**: AI 工程團隊
**審核人**: _________________

---

## 目錄

1. [專案摘要](#1-專案摘要)
2. [現況分析](#2-現況分析)
3. [需求規格](#3-需求規格)
4. [系統架構設計](#4-系統架構設計)
5. [硬體選型分析](#5-硬體選型分析)
6. [軟體整合方案](#6-軟體整合方案)
7. [預算估算](#7-預算估算)
8. [實施時程](#8-實施時程)
9. [風險評估與對策](#9-風險評估與對策)
10. [預期效益](#10-預期效益)
11. [決策建議](#11-決策建議)
12. [附錄](#12-附錄)

---

## 1. 專案摘要

### 1.1 專案名稱
製程視覺 AI 分析系統 (Process Vision AI Analysis System)

### 1.2 專案目標
建置一套結合研華 VisionAI Edge 邊緣運算設備與 Mac 分析伺服器的製程視覺分析系統，實現：

- 即時影像 AI 推論（邊緣端）
- 製程動作自動拆解與週期時間分析
- 統計學習與趨勢預測
- 與現有 WISE-IoTSuite 數據中台整合

### 1.3 專案範圍

| 項目 | 說明 |
|------|------|
| **影像來源** | 現場 20 台 IPCam |
| **邊緣運算** | 研華 VisionAI Edge 5-8 台 |
| **分析伺服器** | Mac Studio / Mac mini |
| **數據整合** | WISE-IoTSuite + DataInsight |
| **應用系統** | Process Vision Web App |

### 1.4 關鍵效益

| 效益 | 說明 |
|------|------|
| **自動化** | 取代人工秒錶計時，減少 80% 工時 |
| **準確性** | AI 分析消除人為誤差，提升數據可信度 |
| **即時性** | 邊緣運算實現 < 100ms 即時偵測 |
| **整合性** | 與 MES/ERP 數據關聯分析 |

---

## 2. 現況分析

### 2.1 現有資源盤點

#### 硬體資源

| 項目 | 數量 | 狀態 | 備註 |
|------|------|------|------|
| IPCam | ~20 台 | 已部署 | RTSP 串流 |
| 網路交換機 | 有 | 運作中 | 需確認 PoE 支援 |
| 伺服器 | - | 無 | 需新購 |

#### 軟體資源

| 項目 | 狀態 | 備註 |
|------|------|------|
| WISE-IoTSuite | ✅ 已購買 | 數據中台核心 |
| IoT Edge | ✅ 已包含 | MQTT + 協定轉換 |
| Dashboard | ✅ 已包含 | 視覺化面板 |
| DataInsight | ❌ 未購買 | ETL 數據交換（建議加購） |

#### 應用系統

| 系統 | 狀態 | 整合需求 |
|------|------|---------|
| Process Vision | ✅ 已開發 | 需整合 Edge 數據 |
| MES | 有 | 生產數據關聯 |
| ERP | 有 | 工單數據關聯 |

### 2.2 現有 Process Vision 系統

目前已開發的 Process Vision 系統功能：

| 功能模組 | 說明 | 完成度 |
|---------|------|--------|
| 影片上傳 | Cloudinary 雲端儲存 | 100% |
| YOLO 分析 | 物件偵測 + 自動分段 | 100% |
| 時間軸編輯 | 拖拉調整分段邊界 | 100% |
| 學習統計 | 趨勢分析 + 標準時間 | 100% |
| 改善比對 | 改善前後效果驗證 | 100% |

**技術架構**：
- 前端：Vue 3 + DaisyUI
- 後端：FastAPI + SQLModel
- 資料庫：Neon PostgreSQL
- AI：YOLO11n (Ultralytics)
- 部署：Vercel (前端) + Render (後端)

### 2.3 痛點分析

| 痛點 | 影響 | 優先級 |
|------|------|--------|
| 無即時分析能力 | 僅能分析錄影檔，無法即時監控 | 高 |
| 雲端處理延遲 | 影片上傳 + 分析耗時較長 | 高 |
| 數據孤島 | 視覺數據與 MES/ERP 未整合 | 中 |
| 擴展性受限 | 單一 Worker 無法處理大量影片 | 中 |

---

## 3. 需求規格

### 3.1 功能需求

#### FR-01: 即時影像分析
| 項目 | 規格 |
|------|------|
| 影像來源 | 20 路 IPCam (1080p @ 30fps) |
| 處理延遲 | < 100ms (邊緣端) |
| 偵測目標 | 人員、手部動作、工具、產品 |
| 輸出格式 | JSON (MQTT 推送) |

#### FR-02: 製程分段識別
| 項目 | 規格 |
|------|------|
| 分段類型 | 取料、定位、組裝、檢查、放置 |
| 識別準確率 | > 90% |
| 邊界誤差 | < 0.5 秒 |

#### FR-03: 數據整合
| 項目 | 規格 |
|------|------|
| 整合平台 | WISE-IoTSuite |
| 數據交換 | DataInsight ETL |
| 關聯查詢 | 生產數據 + 視覺分析 |

#### FR-04: 模型管理
| 項目 | 規格 |
|------|------|
| 訓練環境 | Mac Studio (CoreML/MLX) |
| 部署方式 | OTA 推送到 Edge |
| 版本管理 | 支援回滾 |

### 3.2 非功能需求

#### NFR-01: 效能
| 指標 | 目標值 |
|------|--------|
| Edge 推論速度 | > 30 FPS |
| API 回應時間 | < 500ms |
| 資料同步延遲 | < 5 秒 |

#### NFR-02: 可用性
| 指標 | 目標值 |
|------|--------|
| 系統可用率 | > 99.5% |
| Edge 設備正常運作率 | > 99% |
| 資料完整性 | 100% |

#### NFR-03: 安全性
| 項目 | 要求 |
|------|------|
| 網路隔離 | OT/IT 網段分離 |
| 認證機制 | API Key + JWT |
| 數據傳輸 | TLS 1.3 加密 |

---

## 4. 系統架構設計

### 4.1 整體架構

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                              工廠現場 (OT 網路)                              │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│   ┌─────────────────────────────────────────────────────────────────────┐  │
│   │                        IPCam × 20 台                                 │  │
│   │                    (1080p @ 30fps, RTSP)                            │  │
│   └───────────────────────────────┬─────────────────────────────────────┘  │
│                                   │                                        │
│   ┌───────────────────────────────┴─────────────────────────────────────┐  │
│   │                     工業級 PoE 交換機 (24 Port)                      │  │
│   └───────────────────────────────┬─────────────────────────────────────┘  │
│                                   │                                        │
│   ┌───────────────────────────────┴─────────────────────────────────────┐  │
│   │                                                                     │  │
│   │   ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌───────────┐ │  │
│   │   │ MIC-730AI   │  │ MIC-730AI   │  │ MIC-720AI   │  │MIC-720AI  │ │  │
│   │   │ (6 cam)     │  │ (6 cam)     │  │ (4 cam)     │  │(4 cam)    │ │  │
│   │   │ 關鍵工站 A  │  │ 關鍵工站 B  │  │ 一般工站 C  │  │一般工站 D │ │  │
│   │   └──────┬──────┘  └──────┬──────┘  └──────┬──────┘  └─────┬─────┘ │  │
│   │          │                │                │               │       │  │
│   │          └────────────────┴────────────────┴───────────────┘       │  │
│   │                                   │                                 │  │
│   │                         VisionAI Edge × 4-6 台                      │  │
│   └───────────────────────────────────┬─────────────────────────────────┘  │
│                                       │ MQTT                               │
│                                       │                                    │
└───────────────────────────────────────┼────────────────────────────────────┘
                                        │
                              ┌─────────┴─────────┐
                              │   防火牆/Router   │
                              │   (OT ↔ IT 隔離)  │
                              └─────────┬─────────┘
                                        │
┌───────────────────────────────────────┼────────────────────────────────────┐
│                           WISE-IoTSuite 數據中台                            │
├───────────────────────────────────────┼────────────────────────────────────┤
│                                       │                                    │
│   ┌───────────────────────────────────┴───────────────────────────────┐   │
│   │                         IoT Edge (MQTT Broker)                     │   │
│   └───────────────────────────────────┬───────────────────────────────┘   │
│                                       │                                    │
│   ┌───────────┬───────────┬───────────┼───────────┬───────────┐           │
│   │           │           │           │           │           │           │
│   ▼           ▼           ▼           ▼           ▼           ▼           │
│ ┌─────┐   ┌─────┐   ┌──────────┐  ┌───────┐  ┌───────┐  ┌───────┐        │
│ │時序DB│   │NoSQL│   │DataInsight│  │Dashboard│  │ SSO  │  │ API  │        │
│ │     │   │     │   │  (ETL)   │  │       │  │      │  │Gateway│        │
│ └──┬──┘   └──┬──┘   └────┬─────┘  └───┬───┘  └──────┘  └───┬───┘        │
│    │         │           │            │                    │             │
│    └─────────┴───────────┴────────────┴────────────────────┘             │
│                                       │                                    │
│                                       │ REST API                           │
└───────────────────────────────────────┼────────────────────────────────────┘
                                        │
┌───────────────────────────────────────┼────────────────────────────────────┐
│                              IT 網路 / 機房                                 │
├───────────────────────────────────────┼────────────────────────────────────┤
│                                       │                                    │
│   ┌───────────────────────────────────┴───────────────────────────────┐   │
│   │                     Mac Studio M2 Max (64GB)                       │   │
│   │                        「分析與訓練伺服器」                          │   │
│   │                                                                    │   │
│   │   ┌─────────────┐  ┌─────────────┐  ┌─────────────┐               │   │
│   │   │Process Vision│  │ YOLO 訓練  │  │ 數據分析    │               │   │
│   │   │  Web App    │  │(CoreML/MLX) │  │  引擎       │               │   │
│   │   └─────────────┘  └─────────────┘  └─────────────┘               │   │
│   │                                                                    │   │
│   │   ┌─────────────┐  ┌─────────────┐  ┌─────────────┐               │   │
│   │   │ PostgreSQL  │  │   Redis     │  │  模型庫     │               │   │
│   │   │  (Docker)   │  │  (快取)     │  │ (.mlmodel)  │               │   │
│   │   └─────────────┘  └─────────────┘  └─────────────┘               │   │
│   └────────────────────────────────────────────────────────────────────┘   │
│                                                                            │
│   ┌────────────────────────────────────────────────────────────────────┐   │
│   │                      Mac mini M4 (32GB) [選配]                      │   │
│   │                         「Web Server」                              │   │
│   │                                                                    │   │
│   │   ┌─────────────┐  ┌─────────────┐  ┌─────────────┐               │   │
│   │   │   Nginx     │  │  Grafana    │  │   備援      │               │   │
│   │   │   Proxy     │  │   監控      │  │   服務      │               │   │
│   │   └─────────────┘  └─────────────┘  └─────────────┘               │   │
│   └────────────────────────────────────────────────────────────────────┘   │
│                                                                            │
└────────────────────────────────────────────────────────────────────────────┘
```

### 4.2 資料流設計

#### 4.2.1 即時分析流程

```
IPCam ──RTSP──▶ VisionAI Edge ──推論──▶ JSON ──MQTT──▶ IoTSuite ──API──▶ Mac
                     │
                     ▼
              ┌─────────────┐
              │ TensorRT    │
              │ 推論引擎    │
              │             │
              │ 延遲: <50ms │
              │ FPS: >30    │
              └─────────────┘
```

#### 4.2.2 批次分析流程

```
錄影檔 ──上傳──▶ Mac Studio ──YOLO11──▶ 分析結果 ──API──▶ IoTSuite
                     │
                     ▼
              ┌─────────────┐
              │ CoreML/MLX  │
              │ 推論引擎    │
              │             │
              │ 速度: 5-10x │
              │ 實時        │
              └─────────────┘
```

#### 4.2.3 數據整合流程

```
┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│ VisionAI    │     │    MES      │     │    ERP      │
│ 推論結果    │     │  生產數據   │     │  工單數據   │
└──────┬──────┘     └──────┬──────┘     └──────┬──────┘
       │                   │                   │
       └───────────────────┴───────────────────┘
                           │
                           ▼
                  ┌─────────────────┐
                  │   DataInsight   │
                  │                 │
                  │  - ETL Pipeline │
                  │  - 跨源 SQL     │
                  │  - 增量同步     │
                  └────────┬────────┘
                           │
                           ▼
                  ┌─────────────────┐
                  │   主題資料庫    │
                  │                 │
                  │  - 生產分析     │
                  │  - 品質追蹤     │
                  │  - 效率報表     │
                  └─────────────────┘
```

### 4.3 網路架構

| 網段 | 用途 | IP 範圍 | 設備 |
|------|------|---------|------|
| OT 網路 | 現場設備 | 192.168.1.0/24 | IPCam, VisionAI Edge |
| IT 網路 | 機房伺服器 | 192.168.10.0/24 | Mac, WISE-IoTSuite |
| DMZ | 對外服務 | 10.0.0.0/24 | Web Server |

---

## 5. 硬體選型分析

### 5.1 VisionAI Edge 設備比較

| 規格 | MIC-730AI | MIC-720AI | 選擇建議 |
|------|-----------|-----------|---------|
| **處理器** | Jetson AGX Xavier | Jetson Xavier NX | |
| **GPU** | 512 CUDA + 64 Tensor | 384 CUDA + 48 Tensor | |
| **記憶體** | 32GB | 8GB | |
| **處理能力** | 6-8 路 1080p | 3-4 路 1080p | |
| **功耗** | 30W | 15W | |
| **適用場景** | 關鍵工站、多鏡頭 | 一般工站、少鏡頭 | |
| **單價** | ~NT$150,000 | ~NT$80,000 | |

#### 推薦配置

| 方案 | Edge 配置 | 總處理能力 | 預算 |
|------|----------|-----------|------|
| **方案 A (推薦)** | MIC-730AI × 2 + MIC-720AI × 4 | 28 路 | NT$620,000 |
| 方案 B | MIC-730AI × 4 | 24-32 路 | NT$600,000 |
| 方案 C | MIC-720AI × 6 | 18-24 路 | NT$480,000 |

**推薦方案 A 理由**：
- 關鍵工站使用 MIC-730AI，確保處理效能
- 一般工站使用 MIC-720AI，降低成本
- 總處理能力充裕，預留擴充空間

### 5.2 Mac 分析伺服器比較

| 規格 | Mac mini M4 | Mac mini M4 Pro | Mac Studio M2 Max | Mac Studio M2 Ultra |
|------|-------------|-----------------|-------------------|---------------------|
| **CPU** | 10 核 | 14 核 | 12 核 | 24 核 |
| **GPU** | 10 核 | 20 核 | 38 核 | 76 核 |
| **Neural Engine** | 16 核 | 16 核 | 16 核 | 32 核 |
| **記憶體上限** | 32GB | 64GB | 96GB | 192GB |
| **記憶體頻寬** | 120 GB/s | 273 GB/s | 400 GB/s | 800 GB/s |
| **YOLO 推論速度** | ~0.15 秒/秒 | ~0.08 秒/秒 | ~0.05 秒/秒 | ~0.025 秒/秒 |
| **並行處理能力** | 2-3 路 | 4-6 路 | 8-10 路 | 15-20 路 |
| **模型訓練** | 不適合 | 可行 | 推薦 | 最佳 |
| **價格 (起)** | NT$19,900 | NT$49,900 | NT$63,900 | NT$129,900 |

#### 推薦配置

| 角色 | 設備 | 記憶體 | 儲存 | 預算 |
|------|------|--------|------|------|
| **分析伺服器 (主)** | Mac Studio M2 Max | 64GB | 1TB SSD | NT$100,000 |
| **Web Server (選配)** | Mac mini M4 | 32GB | 512GB SSD | NT$35,000 |

**推薦理由**：
- Mac Studio M2 Max 的 38 核 GPU 足以處理批次分析 + 模型微調
- 64GB 統一記憶體可同時處理多個影片
- Mac mini M4 作為 Web Server 可降低主伺服器負載（選配）

### 5.3 其他硬體

| 項目 | 規格 | 數量 | 單價 | 小計 |
|------|------|------|------|------|
| PoE 交換機 | 工業級 24 Port, 管理型 | 1 | NT$25,000 | NT$25,000 |
| NAS | 4-Bay, 16TB (RAID 5) | 1 | NT$30,000 | NT$30,000 |
| UPS | 3000VA, 在線式 | 1 | NT$20,000 | NT$20,000 |

---

## 6. 軟體整合方案

### 6.1 軟體架構

```
┌─────────────────────────────────────────────────────────────────────────┐
│                              應用層                                      │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│   ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐        │
│   │ Process Vision  │  │ WISE Dashboard  │  │ Grafana 監控    │        │
│   │ (Vue 3 Web App) │  │ (IoTSuite 內建) │  │ (系統監控)      │        │
│   └─────────────────┘  └─────────────────┘  └─────────────────┘        │
│                                                                         │
├─────────────────────────────────────────────────────────────────────────┤
│                              服務層                                      │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│   ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐        │
│   │ Process Vision  │  │ WISE-IoTSuite   │  │ DataInsight     │        │
│   │ API (FastAPI)   │  │ REST API        │  │ (ETL 服務)      │        │
│   └─────────────────┘  └─────────────────┘  └─────────────────┘        │
│                                                                         │
├─────────────────────────────────────────────────────────────────────────┤
│                              數據層                                      │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│   ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐        │
│   │ PostgreSQL      │  │ 時序資料庫      │  │ Redis           │        │
│   │ (分析結果)      │  │ (IoTSuite)      │  │ (快取)          │        │
│   └─────────────────┘  └─────────────────┘  └─────────────────┘        │
│                                                                         │
├─────────────────────────────────────────────────────────────────────────┤
│                              AI 層                                       │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                         │
│   ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐        │
│   │ Edge TensorRT   │  │ Mac CoreML/MLX  │  │ 模型管理        │        │
│   │ (即時推論)      │  │ (批次分析+訓練) │  │ (版本控制)      │        │
│   └─────────────────┘  └─────────────────┘  └─────────────────┘        │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

### 6.2 軟體清單與授權

| 軟體 | 來源 | 授權 | 費用 |
|------|------|------|------|
| **WISE-IoTSuite** | 研華 | 已購買 | (已購) |
| **IoT Edge** | 研華 | 含在 IoTSuite | NT$0 |
| **Dashboard** | 研華 | 含在 IoTSuite | NT$0 |
| **DataInsight** | 研華 | 需加購 | 詢價 |
| **Edge AI SDK** | 研華 | 隨硬體附贈 | NT$0 |
| **TensorRT** | NVIDIA | 免費 | NT$0 |
| **Process Vision** | 自建 | 自有 | NT$0 |
| **PostgreSQL** | 開源 | Apache 2.0 | NT$0 |
| **Redis** | 開源 | BSD | NT$0 |
| **Grafana** | 開源 | AGPL | NT$0 |
| **Docker** | Docker Inc | 免費 | NT$0 |

### 6.3 API 整合規格

#### 6.3.1 VisionAI Edge → IoTSuite (MQTT)

**Topic**: `edge/{edge_id}/inference`

```json
{
    "edge_id": "MIC730AI-001",
    "camera_id": "CAM-A01",
    "timestamp": "2024-01-15T10:30:45.123Z",
    "frame_id": 12345,
    "detections": [
        {
            "class": "person",
            "confidence": 0.95,
            "bbox": [120, 80, 450, 520],
            "track_id": 1
        }
    ],
    "scene_type": "operation",
    "inference_time_ms": 45
}
```

#### 6.3.2 IoTSuite → Mac (REST API)

**Endpoint**: `GET /api/v1/timeseries/query`

```json
{
    "measurement": "vision_inference",
    "start": "2024-01-15T09:00:00Z",
    "end": "2024-01-15T10:00:00Z",
    "tags": {"edge_id": "MIC730AI-001"}
}
```

#### 6.3.3 DataInsight 跨源查詢

```sql
-- 關聯查詢：生產數據 + 視覺分析
SELECT
    p.work_order,
    p.product_name,
    p.quantity,
    v.avg_cycle_time,
    v.efficiency_rate
FROM mes.production p
LEFT JOIN vision.cycle_analysis v
    ON p.work_order = v.work_order
WHERE p.date = '2024-01-15'
```

### 6.4 DataInsight 整合價值

| 沒有 DataInsight | 有 DataInsight |
|------------------|----------------|
| 需自行開發 ETL 程式 | 低代碼 ETL 配置 |
| 各系統數據分散 | 統一 SQL 查詢 |
| MES + Vision 手動關聯 | 自動關聯計算 |
| 開發維護成本高 | 研華統一維護 |
| 數據更新需寫程式 | 內建增量同步 |

**建議**：加購 DataInsight 可大幅降低整合開發成本，實現 MES/ERP/Vision 數據融合分析。

---

## 7. 預算估算

### 7.1 硬體預算

| 項目 | 規格 | 數量 | 單價 (NT$) | 小計 (NT$) |
|------|------|------|-----------|-----------|
| **VisionAI Edge** | | | | |
| MIC-730AI | Jetson AGX Xavier, 32GB | 2 | 150,000 | 300,000 |
| MIC-720AI | Jetson Xavier NX, 8GB | 4 | 80,000 | 320,000 |
| **Mac 伺服器** | | | | |
| Mac Studio M2 Max | 64GB RAM, 1TB SSD | 1 | 100,000 | 100,000 |
| Mac mini M4 (選配) | 32GB RAM, 512GB SSD | 1 | 35,000 | 35,000 |
| **網路設備** | | | | |
| PoE 交換機 | 工業級 24 Port | 1 | 25,000 | 25,000 |
| **儲存** | | | | |
| NAS | 4-Bay, 16TB | 1 | 30,000 | 30,000 |
| **電源** | | | | |
| UPS | 3000VA | 1 | 20,000 | 20,000 |
| | | | **硬體小計** | **830,000** |

### 7.2 軟體預算

| 項目 | 說明 | 費用 (NT$) |
|------|------|-----------|
| WISE-IoTSuite | 已購買 | 0 |
| DataInsight | ETL 數據交換 (建議加購) | 詢價 |
| Edge AI SDK | 隨硬體附贈 | 0 |
| 開源軟體 | PostgreSQL, Redis, Grafana | 0 |
| | **軟體小計** | **待確認** |

### 7.3 服務預算

| 項目 | 說明 | 費用 (NT$) |
|------|------|-----------|
| 系統整合 | 研華專業服務 (選配) | 詢價 |
| 教育訓練 | 操作與維護訓練 | 內部執行 |
| | **服務小計** | **待確認** |

### 7.4 預算彙總

| 類別 | 金額 (NT$) | 備註 |
|------|-----------|------|
| 硬體 | 830,000 | 含選配 Mac mini |
| 軟體 | 待確認 | DataInsight 詢價 |
| 服務 | 待確認 | 選配 |
| **總計 (不含選配)** | **795,000** | |
| **總計 (含選配)** | **830,000 + 軟體** | |

### 7.5 分期採購建議

| 階段 | 項目 | 預算 | 時間 |
|------|------|------|------|
| **Phase 1** | Mac Studio + 2 台 MIC-720AI | NT$260,000 | Q1 |
| **Phase 2** | 2 台 MIC-730AI + DataInsight | NT$300,000 + 軟體 | Q2 |
| **Phase 3** | 2 台 MIC-720AI + Mac mini + 周邊 | NT$270,000 | Q3 |

---

## 8. 實施時程

### 8.1 專案時程表

```
     W1   W2   W3   W4   W5   W6   W7   W8   W9   W10  W11  W12
      │    │    │    │    │    │    │    │    │    │    │    │
Phase 1: 準備階段
├────────────────┤
│ 採購/網路規劃  │

Phase 2: 基礎建置
      ├────────────────┤
      │Mac 伺服器建置  │

Phase 3: Edge 部署
           ├────────────────┤
           │VisionAI Edge   │
           │安裝/攝影機對接 │

Phase 4: 系統整合
                ├────────────────┤
                │API 整合        │
                │MQTT 串接       │

Phase 5: 應用整合
                     ├────────────────┤
                     │前端整合        │
                     │DataInsight 設定│

Phase 6: 測試上線
                          ├────────────────┤
                          │測試驗證        │
                          │模型調校        │
                          │正式上線        │
```

### 8.2 里程碑

| 里程碑 | 週次 | 交付物 |
|--------|------|--------|
| M1: 環境就緒 | W2 | Mac 伺服器運作、Docker 環境建置完成 |
| M2: Edge 上線 | W6 | VisionAI Edge 全數安裝、攝影機對接完成 |
| M3: 整合完成 | W8 | API 串接完成、MQTT 資料流通 |
| M4: UAT 開始 | W10 | 使用者驗收測試開始 |
| M5: 正式上線 | W12 | 系統正式營運 |

### 8.3 各階段工作細項

#### Phase 1: 準備階段 (W1-W2)
- [ ] 硬體採購下單
- [ ] 網路架構規劃確認
- [ ] IP 位址分配
- [ ] 防火牆規則定義
- [ ] 研華技術支援聯繫

#### Phase 2: 基礎建置 (W3-W4)
- [ ] Mac Studio 到貨與設定
- [ ] macOS 環境配置
- [ ] Docker 安裝與設定
- [ ] PostgreSQL / Redis 部署
- [ ] Process Vision API 本地部署

#### Phase 3: Edge 部署 (W5-W6)
- [ ] VisionAI Edge 到貨與開箱
- [ ] Edge AI SDK 安裝
- [ ] 攝影機 RTSP 串接
- [ ] YOLO 模型部署測試
- [ ] MQTT 發布測試

#### Phase 4: 系統整合 (W7-W8)
- [ ] IoTSuite MQTT Broker 設定
- [ ] Edge → IoTSuite 資料流測試
- [ ] Mac API 整合 IoTSuite
- [ ] DataInsight ETL Pipeline 設定
- [ ] 跨源查詢測試

#### Phase 5: 應用整合 (W9-W10)
- [ ] Process Vision 前端整合
- [ ] Dashboard 視覺化設定
- [ ] Grafana 監控面板建置
- [ ] 使用者權限設定
- [ ] 操作手冊撰寫

#### Phase 6: 測試上線 (W11-W12)
- [ ] 功能測試
- [ ] 效能測試
- [ ] 壓力測試
- [ ] 使用者驗收測試
- [ ] 模型微調
- [ ] 正式上線
- [ ] 教育訓練

---

## 9. 風險評估與對策

### 9.1 風險清單

| 編號 | 風險項目 | 機率 | 影響 | 風險等級 | 對策 |
|------|---------|------|------|---------|------|
| R1 | 硬體交期延遲 | 中 | 高 | 高 | 提前下單、備案供應商 |
| R2 | 網路整合困難 | 低 | 高 | 中 | 預留緩衝時間、研華支援 |
| R3 | AI 模型準確率不足 | 中 | 中 | 中 | 增量訓練、資料標註 |
| R4 | WISE-IoTSuite 版本相容 | 低 | 中 | 低 | 版本確認、測試環境驗證 |
| R5 | 人員技能不足 | 中 | 中 | 中 | 教育訓練、文件撰寫 |
| R6 | 現場環境干擾 | 低 | 低 | 低 | 工業級設備、防護措施 |

### 9.2 風險矩陣

```
影響
  高 │  R4   │  R1   │       │
     │       │  R2   │       │
  中 │  R6   │  R3   │       │
     │       │  R5   │       │
  低 │       │       │       │
     └───────┴───────┴───────┘
           低     中     高
                機率
```

### 9.3 應變計畫

#### R1: 硬體交期延遲
- **預防措施**: 提前 4 週下單、確認庫存
- **應變措施**: 調整專案時程、先以現有設備測試
- **負責人**: 採購 / PM

#### R3: AI 模型準確率不足
- **預防措施**: 收集多樣化訓練資料、預先標註
- **應變措施**: 增量訓練、調整模型參數、人工校正
- **負責人**: AI 工程師

---

## 10. 預期效益

### 10.1 量化效益

| 效益項目 | 現況 | 導入後 | 改善幅度 |
|---------|------|--------|---------|
| 週期時間量測工時 | 8 小時/週 | 1 小時/週 | -87.5% |
| 數據記錄人力 | 2 人 | 0.5 人 | -75% |
| 數據準確度 | 85% | 98% | +15% |
| 異常偵測時間 | 30 分鐘 | 即時 | -100% |
| 報表產出時間 | 4 小時 | 10 分鐘 | -96% |

### 10.2 質化效益

| 效益項目 | 說明 |
|---------|------|
| **數據驅動決策** | 即時數據支援生產決策 |
| **持續改善** | 趨勢分析找出改善機會 |
| **知識傳承** | 標準作業數據化保存 |
| **品質追溯** | 完整影像紀錄 |

### 10.3 投資報酬分析

| 項目 | 金額 (NT$/年) |
|------|-------------|
| **成本節省** | |
| 人力成本節省 (1.5 人 × 60 萬) | 900,000 |
| 品質成本降低 (估) | 300,000 |
| **效益增加** | |
| 生產效率提升 3% (估) | 500,000 |
| **年度效益合計** | **1,700,000** |
| | |
| **投資成本** | 830,000 |
| **投資回收期** | **5.9 個月** |

---

## 11. 決策建議

### 11.1 方案比較

| 評估項目 | 方案 A (推薦) | 方案 B | 方案 C |
|---------|--------------|--------|--------|
| **Edge 配置** | 730AI×2 + 720AI×4 | 730AI×4 | 720AI×6 |
| **Mac 配置** | Studio M2 Max | Studio M2 Ultra | Studio M2 Max |
| **處理能力** | 28 路 | 24-32 路 | 18-24 路 |
| **擴充彈性** | 高 | 中 | 中 |
| **預算** | NT$720,000 | NT$700,000 | NT$580,000 |
| **推薦指數** | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐ |

### 11.2 推薦方案

**推薦採用方案 A**，理由如下：

1. **效能平衡**: 關鍵工站使用 MIC-730AI 確保效能，一般工站使用 MIC-720AI 控制成本
2. **擴充彈性**: 28 路處理能力超過目前 20 路需求，預留擴充空間
3. **成本效益**: 投資回收期約 6 個月，ROI 良好
4. **整合完整**: 與 WISE-IoTSuite 無縫整合，降低開發成本

### 11.3 待決策事項

| 編號 | 決策項目 | 選項 | 建議 |
|------|---------|------|------|
| D1 | 是否加購 DataInsight | 是 / 否 | 建議加購 |
| D2 | 是否採購 Mac mini | 是 / 否 | 視預算決定 |
| D3 | 是否分期採購 | 一次 / 分期 | 建議分期降低風險 |
| D4 | 是否委託研華整合服務 | 是 / 否 | 視內部人力決定 |

### 11.4 下一步行動

1. **立即**: 確認預算額度
2. **1 週內**: 決定 DataInsight 是否加購
3. **2 週內**: 完成採購申請
4. **3 週內**: 下單採購

---

## 12. 附錄

### 附錄 A: 研華產品規格書

- MIC-730AI Datasheet
- MIC-720AI Datasheet
- WISE-IoTSuite Product Brief
- DataInsight Feature Guide

### 附錄 B: 技術參考

- Edge AI SDK Documentation
- WISE-IoTSuite REST API Reference
- DataInsight ETL Configuration Guide

### 附錄 C: 網路架構圖

(詳見第 4 章)

### 附錄 D: API 規格文件

(詳見第 6 章)

---

## 文件歷史

| 版本 | 日期 | 修改內容 | 作者 |
|------|------|---------|------|
| 1.0 | 2024-01-15 | 初版 | AI 工程團隊 |

---

## 簽核

| 角色 | 姓名 | 簽名 | 日期 |
|------|------|------|------|
| 撰寫人 | | | |
| 審核人 | | | |
| 核准人 | | | |
